<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-16">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/assets/style.css">
    

    <title></title>
  </head>
  <body>
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/">
          <img src="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/assets/img/haal_centraal_zon_geel_RGB.png" width="238px">
        </a>
        <span class="navbar-text">BRP API Personen</span>
        
          <a class="navbar-brand-right" href="http://www.rvig.nl/" target="_blank">
            <img src="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/assets/img/BZK_RIG_Logo_online_ex_pos_nl.png" width="238px">
          </a>
        
      </nav>
      <div style="height: 0px; border-top: 1px solid #b1b1b1;box-shadow: 0 -5px 5px -5px #7c7c7c;"></div>
      <nav class="navbar navbar-expand-lg navbar-light bg-light" style="text-align: right;">
        <div class="collapse navbar-collapse">
    <ul class="navbar-nav mx-auto">
      <li class="nav-item active">
        <a class="nav-link" href="https://vng-realisatie.github.io/Haal-Centraal/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Starten met Haal Centraal
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/starten-met-haal-centraal">Startgids</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/transitieplan">Transitieplan</a>
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/security">Security</a>
       </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Aansluiten op API's
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/aansluiten-op-apis">Aansluiten op API's</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://lvbag.github.io/BAG-Gemeentelijke-wensen-tav-BAG-Bevragingen/">BAG Individuele Bevragingen (live)</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://kadaster.github.io/BRK-bevragen/">BRK Bevragen (live)</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://brp-api.github.io/Haal-Centraal-BRP-bevragen/">BRP Persoon (live)</a>
          <a class="dropdown-item" href="https://brp-api.github.io/Haal-Centraal-BRP-historie-bevragen/">BRP Historie (live)</a>
          <a class="dropdown-item" href="https://brp-api.github.io/Haal-Centraal-BRP-bewoning/">BRP Bewoning (live)</a>
          <a class="dropdown-item" href="https://brp-api.github.io/Haal-Centraal-Reisdocumenten-bevragen//">BRP Reisdocumenten (live)</a>
          <a class="dropdown-item" href="https://brp-api.github.io/Haal-Centraal-BRP-tabellen-bevragen/">BRP Tabellen</a>
          <a class="dropdown-item" href="https://brp-api.github.io/Haal-Centraal-BRP-Update-API/">BRP Update API</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://kadaster.github.io/WOZ-bevragen/">WOZ Bevragen (live)</a>
       </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Bijdragen aan API's</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/hoe-kun-je-bijdragen">Bijdragen aan API's</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/bug_melden">Bug melden</a>
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/verbetervoorstel">Verbetervoorstel</a>
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/gebruikerswens">Gebruikerswens</a>
       </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link" href="https://vng-realisatie.github.io/Haal-Centraal/over-haal-centraal">Over Haal Centraal</a>
<!--        <a class="nav-link dropdown" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Over Haal Centraal</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://vng-realisatie.github.io/Haal-Centraal/planning">Planning</a>
       </div-->
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://vng-realisatie.github.io/Haal-Centraal/contact">Contact</a>
      </li>
    </ul>
</div>

      </nav>
    </div>
    <div class="container-fluid">
    <div class="row">
        <div class="col-2">
	<div class="header">BRP Personen Bevragen</div>
	<nav class="nav flex-column">
    
      
	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/" target="">Main</a>

	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/goals-canvas" target="">Goals canvas</a>

    
  
	<div class="header">Specificaties v. 2</div>
	<nav class="nav flex-column">
    
      
	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/releasenotes" target="">Releasenotes</a>

	
	<a class="nav-link active" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/v2/getting-started" target="">Getting started</a>

	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/user-stories-prod" target="">User stories</a>

	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/v2/redoc" target="">Bevragen API</a>

	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/v2/features-overzicht" target="">Features overzicht</a>

	
	<a class="nav-link" href="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/features/index" target="">Features test overzicht</a>

    
  
</nav>
</div>
        <div class="col-9"><h1 id="getting-started">Getting Started</h1>

<p>Gemeenten en andere organisaties met een autorisatiebesluit kunnen zich aanmelden voor deelname aan het Experiment dataminimalisatie.</p>

<ol>
  <li>Bekijk de <a href="#functionaliteit-en-specificaties">functionaliteit en specificaties</a></li>
  <li>Probeer en test de BRP API Personen <a href="#probeer-en-test-de-api-lokaal">lokaal</a> of in de <a href="#probeer-en-test-de-api-in-de-proef-omgeving">proef omgeving</a></li>
  <li><a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/docs/250204%20deelname%20BRP%20API%20v3.0.pdf" target="_blank" rel="noopener">Download</a> en lees het onboardingproces</li>
</ol>

<h2 id="functionaliteit-en-specificaties">Functionaliteit en specificaties</h2>

<p>De BRP API Personen is gespecificeerd met behulp van de <a href="https://spec.openapis.org/oas/v3.0.3">OpenAPI Specification v3.0.3</a>.</p>

<p>De OAS3 specificatie van de BRP API Personen kan worden bekeken met behulp van <a href="./redoc">Redoc</a>.</p>

<p>Download de <a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/specificatie/genereervariant/openapi.yaml" target="_blank" rel="noopener">OAS3 specificatie</a> van de ‘BRP API Personen’ om hiermee consumer code te genereren.</p>

<p>De <a href="./features-overzicht">functionele documentatie</a> van de BRP API Personen vind je in het <a href="./features-overzicht">features overzicht</a>.</p>

<h2 id="probeer-en-test-de-api-in-de-demo-omgeving">Probeer en test de API in de demo omgeving</h2>

<p>Je kunt de BRP API Personen uitproberen op de demo omgeving met de volgende url: [https://demo-omgeving.haalcentraal.nl]. Hiervoor heb je een apikey nodig.</p>

<ul>
  <li>Vraag een apikey aan bij de product owner <a href="mailto:cathy.dingemanse@rvig.nl">cathy.dingemanse@rvig.nl</a>.</li>
  <li>Voeg de apikey toe aan een request met de <strong>X-API-KEY</strong> header.</li>
</ul>

<h2 id="probeer-en-test-de-api-lokaal">Probeer en test de API lokaal</h2>

<p>Een mock van de BRP API Personen is beschikbaar als een containerized applicatie, die je gemakkelijk kunt hosten op een lokale machine of in een testomgeving. Bijkomend voordeel is dat je je eigen testgevallen kunt toevoegen aan het JSON bestand.</p>

<p>Je kunt het <a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/docker-compose-mock.yml" target="_blank" rel="noopener">docker compose bestand</a> gebruiken om de BRP API Personen mock met behulp van <a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a> te draaien op een lokale machine.</p>

<p>In het <a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/docker-compose-mock.yml" target="_blank" rel="noopener">docker compose bestand</a> is een volume map geconfigureerd naar de ./src/config/BrpService map met het test-data.json bestand. Dit bestand bevat gegevens van persoonslijsten die voorkomen in de LAP omgeving en kan worden uitgebreid met eigen test persoonsgegevens. Herstart de container als het test-data.json bestand is gewijzigd. Aangezien dit bestand kan worden bijgewerkt, is het handig om wijzigingen aan het einde van het bestand toe te voegen. Dit maakt het makkelijker om eigen wijzigingen veilig te stellen voordat het bestand lokaal moet worden bijgewerkt.</p>

<p>In plaats van het docker compose bestand kun je de <a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/.k8s" target="_blank" rel="noopener">Kubernetes configuratie bestanden</a> gebruiken om de BRP API Personen mock te draaien op een lokale machine. De BRP API Personen mock maakt gebruik van de <a href="https://www.rvig.nl/media/288">testdataset persoonslijsten proefomgevingen GBA-V</a> als input om de productie situatie zoveel mogelijk te kunnen simuleren.</p>

<p>De volgende paragrafen beschrijven wat je moet doen om de BRP API Personen mock op een lokale machine te installeren en aan te roepen.</p>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
  <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a> voor het hosten van containers</li>
  <li>Je kunt Docker Desktop ook gebruiken om de containers te hosten met behulp van de Kubernetes engine. Hiervoor moet je in Docker Desktop Kubernetes ondersteuning aanzetten in het Settings/Kubernetes configuratie scherm <img src="/Haal-Centraal-BRP-bevragen/pr-preview/pr-1908/img/docker-desktop-enable-k8s.png" alt="Enable Kubernetes" /></li>
</ul>

<p>Optioneel kun je de volgende tools ook op de lokale machine installeren:</p>

<ul>
  <li><a href="https://git-scm.com/downloads">git</a> voor het clonen van git repositories</li>
  <li><a href="https://www.postman.com/downloads/">Postman</a> voor het aanroepen van BRP API Personen</li>
</ul>

<h3 id="gebruik-docker-als-container-engine">Gebruik Docker als container engine</h3>

<ul>
  <li>Download het <a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/docker-compose-mock.yml" target="_blank" rel="noopener">docker compose bestand</a></li>
  <li>Start een command prompt window voor de map met het docker-compose-mock.yaml bestand</li>
  <li>Start de BRP API Personen mock met behulp van de volgende statement:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
docker-compose <span class="nt">-f</span> docker-compose-mock.yml up <span class="nt">-d</span>

</code></pre></div>    </div>
    <p>De BRP API Personen mock is nu te benaderen via de url: <em>http://localhost:5010/haalcentraal/api/brp/personen</em></p>
  </li>
  <li>Valideer dat de BRP API Personen mock draait met behulp van de volgende curl statement:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://localhost:5010/haalcentraal/api/brp/personen'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "type": "RaadpleegMetBurgerservicenummer",
    "burgerservicenummer": ["999993653"],
    "fields": ["burgerservicenummer"]
}'</span>

</code></pre></div>    </div>
  </li>
  <li>Om de BRP API Personen mock container te stoppen voer je de volgende statement uit:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
docker-compose <span class="nt">-f</span> docker-compose-mock.yml down

</code></pre></div>    </div>
  </li>
</ul>

<h3 id="gebruik-kubernetes-als-container-engine">Gebruik Kubernetes als container engine</h3>

<ul>
  <li>Download de <a href="https://github.com/BRP-API/Haal-Centraal-BRP-bevragen/blob/master/.k8s" target="_blank" rel="noopener">kubernetes configuratie bestanden</a></li>
  <li>Start een command prompt window voor de map met de kubernetes manifest bestanden</li>
  <li>Start de BRP API Personen mock met behulp van de volgende statement:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
kubectl apply <span class="nt">-f</span> .k8s/personenmock-deployment.yaml <span class="se">\</span>
              <span class="nt">-f</span> .k8s/personenmock-service.yaml 

</code></pre></div>    </div>
    <p>De BRP API Personen mock is nu te benaderen via de url: <em>http://localhost:5010/haalcentraal/api/brp/personen</em></p>
  </li>
  <li>Valideer dat de BRP API Personen mock draait met behulp van de volgende curl statement:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://localhost:5010/haalcentraal/api/brp/personen'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "type": "RaadpleegMetBurgerservicenummer",
    "burgerservicenummer": ["999993653"],
    "fields": ["burgerservicenummer"]
}'</span>

</code></pre></div>    </div>
  </li>
  <li>Om de BRP API Personen mock container te stoppen voer je de volgende statement uit:
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
kubectl delete <span class="nt">-f</span> .k8s/personenmock-deployment.yaml <span class="se">\</span>
               <span class="nt">-f</span> .k8s/personenmock-service.yaml 

</code></pre></div>    </div>
  </li>
</ul>
</div>
    </div>
</div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    
  </body>
</html>
